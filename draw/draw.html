<!DOCTYPE html>
<html>
<head lang="en" xmlns="http://www.w3.org/1999/xhtml">
    <meta charset="UTF-8">
    <title>Draw</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.4/yeti/bootstrap.min.css" id="theme" />
    <link rel="stylesheet" href="css/draw.css" />
    <link rel="stylesheet" href="css/builder.css" />


    <link rel="stylesheet" href="../css/lib/bootstrap-chosen.css" />
    <link rel="stylesheet" href="../css/lib/datepicker.css" />
    <link rel="stylesheet" href="../css/wait.css" />
    <link rel="stylesheet" href="../css/containers.css" />
    <link rel="stylesheet" href="../css/select.css" />
    <link rel="stylesheet" href="../css/textarea.css" />
    <link rel="stylesheet" href="../css/table.css" />
    <link rel="stylesheet" href="../css/input.css" />
    <link rel="stylesheet" href="../css/outcome.css" />
    <link rel="stylesheet" href="../css/loading.css" />
    <link rel="stylesheet" href="../css/modal.css" />
    <link rel="stylesheet" href="../css/group.css" />
    <link rel="stylesheet" href="../css/pagination.css" />
    <link rel="stylesheet" href="../css/notifications.css" />
    <link rel="stylesheet" href="../css/navigation.css" />
    <link rel="stylesheet" href="../css/feed.css" />
    <link rel="stylesheet" href="../css/files.css" />
    <link rel="stylesheet" href="../css/debug.css" />

</head>
<body class="clearfix">

<nav class="navbar navbar-default">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="#">
                <img alt="ManyWho Flow Designer" src="https://cdn.manywho.com/images/designer-logo.png" class="logo" />
            </a>
        </div>

        <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li><a id="flow" href="#">Flows</a></li>

            </ul>

            <ul class="nav navbar-nav navbar-right">
                <select class="select" onchange="manywho.graph.events.changeTheme(this)">
                    <option value="cerulean">Cerulean</option>
                    <option value="cosmo">Cosmo</option>
                    <option value="cyborg">Cyborg</option>
                    <option value="darkly">Darkly</option>
                    <option value="flatly">Flatly</option>
                    <option value="journal">Journal</option>
                    <option value="lumen">Lumen</option>
                    <option value="paper">Paper</option>
                    <option value="readable">Readable</option>
                    <option value="sandstone">Sandstone</option>
                    <option value="simplex">Simplex</option>
                    <option value="slate">Slate</option>
                    <option value="spacelab">Spacelab</option>
                    <option value="superhero">Superhero</option>
                    <option value="united">United</option>
                    <option selected value="yeti">Yeti</option>
                </select>
                <li class="execute-buttons"><p class="navbar-btn"><a id="generate" class="btn btn-success" href="#">Generate</a></p></li>
                <li class="execute-buttons"><p class="navbar-btn"><a id="save-flow" class="btn btn-danger" href="#">Save and Close</a></p></li>
            </ul>
        </div>
    </div>
</nav>

<div id="manywho" class="mw-bs">
    <div id="draw-tool" class="container-fluid hidden">
        <div class="row-fluid clearfix">
            <div class="col-md-2">
                <h1 id="flow-title">Flow Title Here</h1>
                <p id="flow-description"></p>
                <div id="graph-outline"></div>
                <ul id="element-list">
                    <li><a class="btn btn-default element-button" href="#" id="input">Step</a></li>
                    <!--<li><a class="btn btn-default element-button" href="#" id="decision">Decision</a></li>-->
                </ul>
            </div>
            <div class="col-md-10">
                <div id="graph"></div>
            </div>
        </div>
    </div>
    <div id="draw-modal">
    </div>
</div>

<script>

    var manywho = {
        cdnUrl: '',
        initialize: function () {

            var queryParameters = manywho.utils.parseQueryString(window.location.search.substring(1));

            manywho.settings.initialize({
                adminTenantId: 'da497693-4d02-45db-bc08-8ea16d2ccbdf',
                playerUrl: [ location.protocol, '//', location.host, location.pathname ].join(''),
                joinUrl: [ location.protocol, '//', location.host, location.pathname ].join(''),
                platform: {
                    uri: 'https://flow.manywho.com'
                }
            });

            var options = {
                authentication: {
                    sessionId: queryParameters['session-token'],
                    sessionUrl: queryParameters['session-url']
                },
                navigationElementId: queryParameters['navigation-element-id'],
                mode: queryParameters['mode'],
                reportingMode: queryParameters['reporting-mode'],
                trackLocation: false,
                replaceUrl: false,
                collaboration: {
                    isEnabled: false
                },
                autoFocusInput: true,
                inputs: null,
                annotations: null,
                collapsible: true,
                navigation: {
                    isFixed: true
                }
            };

            var settings = window.devOptions || {};

            var tenantId = queryParameters['tenant-id'] || settings.tenant;
            if (!tenantId) {

                tenantId = window.location.pathname
                        .split('/')
                        .filter(function (path) {

                            return path && path.length > 0;

                        })[0];

            }


            manywho.draw.initialize()

        }
    };
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.4.2/chosen.jquery.min.js"></script>
<script src="https://cdn.socket.io/socket.io-1.3.5.js"></script>
<script type="text/javascript">

    mxBasePath = 'mxgraph/src';

</script>
<script src="mxgraph/src/js/mxClient.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/react/0.12.2/react.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/loglevel/1.2.0/loglevel.min.js"></script>
<script src="js/draw.js"></script>
<script src="js/services/graph.js"></script>
<script src="js/services/model.js"></script>
<script src="js/services/style.js"></script>
<script src="js/services/events.js"></script>
<script src="js/services/element.js"></script>
<script src="js/services/ajax.js"></script>
<script src="js/services/json.js"></script>

<script src="js/layout.js"></script>
<script src="js/configuration/conference.js"></script>
<script src="js/configuration/dial.js"></script>
<script src="js/configuration/dtmf.js"></script>
<script src="js/configuration/gather.js"></script>
<script src="js/configuration/play.js"></script>
<script src="js/configuration/record.js"></script>
<script src="js/configuration/say.js"></script>
<script src="js/configuration/sleep.js"></script>

<script src="js/components/lua.js"></script>
<script src="js/components/builder.js"></script>
<script src="js/components/canvas.js"></script>
<script src="js/components/list.js"></script>
<script src="js/components/draggable.js"></script>

<script>
    log.enableAll()
</script>

<script src="https://flow.manywho.com/js/constants"></script>
<script src="https://assets.manywho.com/js/loader.min.js"></script>

<script>
    manywho.initialize();
</script>

</body>
</html>