<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>ManyWho React UI</title>

    <!-- build:bootstrap -->
    <link rel="stylesheet" href="css/mw-bootstrap.css" />
    <link rel="stylesheet" href="css/themes/mw-paper.css" id="theme" />
    <!-- endbuild -->
    
    <!-- build:css -->
    <link rel="stylesheet" href="css/lib/bootstrap-chosen.css" />
    <link rel="stylesheet" href="css/wait.css" />
    <link rel="stylesheet" href="css/containers.css" />
    <link rel="stylesheet" href="css/select.css" />
    <link rel="stylesheet" href="css/textarea.css" />
    <link rel="stylesheet" href="css/table.css" />
    <link rel="stylesheet" href="css/input.css" />
    <link rel="stylesheet" href="css/outcome.css" />
    <link rel="stylesheet" href="css/loading.css" />
    <link rel="stylesheet" href="css/modal.css" />
    <link rel="stylesheet" href="css/group.css" />
    <link rel="stylesheet" href="css/pagination.css" />
    <link rel="stylesheet" href="css/notifications.css" />
    <!-- endbuild -->
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.12.2/react.min.js"></script>
    <script src="https://cdn.socket.io/socket.io-1.3.2.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.1.0/chosen.jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/loglevel/1.2.0/loglevel.min.js"></script>

    <script>
        var manywho = {
            baseUrl: '',
            cdnUrl: ''
        };
    </script>

    <!-- build:log -->
    <script>
        log.enableAll()
    </script>
    <!-- endbuild -->

    <!-- build:js -->
    <script src="js/lib/react-chosen.js"></script>

    <script src="js/services/ajax.js"></script>
    <script src="js/services/model.js"></script>
    <script src="js/services/component.js"></script>
    <script src="js/services/styling.js"></script>
    <script src="js/services/collaboration.js"></script>
    <script src="js/services/state.js"></script>
    <script src="js/services/engine.js"></script>
    <script src="js/services/themeing.js"></script>
    <script src="js/services/settings.js"></script>
    <script src="js/services/json.js"></script>
    <script src="js/services/utils.js"></script>
    <script src="js/services/authorization.js"></script>
    <script src="js/services/callbacks.js"></script>

    <script src="js/components/main.js"></script>
    <script src="js/components/navigation.js"></script>
    <script src="js/components/group.js"></script>
    <script src="js/components/inline.js"></script>
    <script src="js/components/vertical.js"></script>
    <script src="js/components/horizontal.js"></script>
    <script src="js/components/presentation.js"></script>
    <script src="js/components/input.js"></script>
    <script src="js/components/textarea.js"></script>
    <script src="js/components/outcome.js"></script>
    <script src="js/components/select.js"></script>
    <script src="js/components/table-container.js"></script>
    <script src="js/components/table-large.js"></script>
    <script src="js/components/table-small.js"></script>
    <script src="js/components/pagination.js"></script>
    <script src="js/components/wait.js"></script>
    <script src="js/components/modal.js"></script>
    <script src="js/components/notifications.js"></script>
    <!-- endbuild -->

    <!-- options -->

    <script>
        function initializeManyWho() {

            var queryParameters = manywho.utils.parseQueryString(window.location.search.substring(1));

            manywho.settings.initialize({
                adminTenantId: 'da497693-4d02-45db-bc08-8ea16d2ccbdf',
                playerUrl: document.URL
            });

            var options = {
                authentication: {
                    sessionId: queryParameters['session-token'],
                    sessionUrl: queryParameters['session-url']
                },
                navigationElementId: queryParameters['navigation-element-id'],
                mode: queryParameters['mode'],
                reportingMode: queryParameters['reporting-mode'],
                trackLocation: false,
                replaceUrl: false,
                collaboration: {
                    isEnabled: false
                },
                inputs: null,
                annotations: null
            }

            var settings = window.devOptions || {};

            manywho.engine.initialize(
                queryParameters['tenant-id'] || settings.tenant,
                queryParameters['flow-id'] || settings.flow,
                queryParameters['flow-version-id'] || settings.version,
                'main',
                queryParameters['join'] || settings.state,
                queryParameters['authorization'],
                options
            );

        }
    </script>
</head>
<body>    
    <div id="manywho"></div>

    <!-- build:loader -->
    <script>
        initializeManyWho();
    </script>
    <!-- endbuild -->

</body>
</html>